#:import FadeTransition kivy.uix.screenmanager.FadeTransition

<MapToolbarWidget@BoxLayout>:
    size_hint_y: None
    height: '48dp'
    padding: '4dp'
    spacing: '4dp'

    canvas.before:
        Color:
            rgba: .2, .2, .2, .6
        Rectangle:
            pos: self.pos
            size: self.size

<NotesWidget@BoxLayout>:
    id: note_layout

<MapPanelWidget@FloatLayout>:
    id: map_panel_layout
    MapWidget:
        id: map_widget
    MapToolbarWidget:
        Button:
            text: 'Go To Current Location'
            on_release: app.map.do_move_to_current_location()
        Button:
            size_hint: (.3, 1)
            text: 'Type'
            on_release: app.map.do_cycle_map_type()

<ChecklistWidget@ScrollView>:
    id: checklist_layout

<RootWidget>:
    screen_manager: screen_manager
    BoxLayout:
        id: root_widget
        orientation: 'vertical'
        BoxLayout:
            id: status_panel_layout
            orientation: 'horizontal'
            size_hint: 1, .1
            Button:
                background_normal: 'data/images/status/good.jpg'
                background_down: 'data/images/status/good_pressed.jpg'
                on_release: app.xmpp_client.update_mood('happy')
            Button:
                background_normal: 'data/images/status/neutral.jpg'
                background_down: 'data/images/status/neutral_pressed.jpg'
                on_release: app.xmpp_client.update_mood('calm')
            Button:
                background_normal: 'data/images/status/bad.jpg'
                background_down: 'data/images/status/bad_pressed.jpg'
                on_release: app.xmpp_client.update_mood('angry')
        BoxLayout
            ScreenManager:
                id: screen_manager
                transition: FadeTransition()
                Screen:
                    name: 'Home'
                    MapPanelWidget:
                        id: map_panel_widget
                Screen:
                    name: 'Menu'
                    BoxLayout:
                        id: default_layout
                        orientation: 'vertical'
                        spacing: 2
                        BoxLayout:
                            id: menu_panel_layout
                            orientation: 'horizontal'
                            size_hint: 1, .8
                            ScrollView:
                                do_scroll_x: False
                                BoxLayout:
                                    id: settings_layout
                                    orientation: 'vertical'
                                    Button:
                                        background_normal: 'data/images/settings/notes.png'
                                        background_down: 'data/images/settings/notes.png'
                                        on_release: root.do_set_screen(self, "Notes")
                                    Button:
                                        background_normal: 'data/images/settings/messages.png'
                                        background_down: 'data/images/settings/messages.png'
                                        on_release: root.do_set_screen(self, "Messages")
                                    Button:
                                        background_normal: 'data/images/settings/recorder.png'
                                        background_down: 'data/images/settings/recorder.png'
                                        on_release: root.do_set_screen(self, "Recorder")
                                    Button:
                                        background_normal: 'data/images/settings/soundboard.png'
                                        background_down: 'data/images/settings/soundboard.png'
                                        on_release: root.do_set_screen(self, "Soundboard")
                                    Button:
                                        background_normal: 'data/images/settings/checklist.png'
                                        background_down: 'data/images/settings/checklist.png'
                                        on_release: root.do_set_screen(self, "Checklist")
                                    Button:
                                        background_normal: 'data/images/settings/campaigns.png'
                                        background_down: 'data/images/settings/campaigns.png'
                                        on_release: root.do_set_screen(self, "Campaigns")
                Screen:
                    name: 'Notes'
                    NotesWidget:
                        id: notes_menu
                Screen:
                    name: 'Messages'
                    BoxLayout:
                        id: default_layout
                        orientation: 'vertical'
                        spacing: 2
                        BoxLayout:
                            id: message_panel_layout
                            orientation: 'horizontal'
                            size_hint: 1, .8
                            TextInput:
                                size_hint: 1, .85
                                multiline: True
                                background_color: [0,0,0,1]
                                foreground_color: [1,1,1,1]
                                focus: False
                                hint_text: 'This is where the messages will go'
                Screen:
                    name: 'Recorder'
                    BoxLayout:
                        id: default_layout
                        orientation: 'vertical'
                        spacing: 2
                        BoxLayout:
                            id: recorder_panel_layout
                            orientation: 'horizontal'
                            size_hint: 1, .8
                            Button:
                                text: 'Start Recorder'
                                on_release: root.do_start_recording()
                            Button:
                                text: 'Stop Recording'
                                on_release: root.do_stop_recording()
                Screen:
                    name: 'Soundboard'
                    BoxLayout:
                        id: default_layout
                        orientation: 'vertical'
                        spacing: 2
                        GridLayout:
                            id: soundboard_panel_layout
                            rows: 3
                            cols: 3
                            size_hint: 1, .8
                            Button:
                                text: 'Sad Trombone'
                                on_release: root.do_play_sound('data/audio/sad_trombone.wav')
                            Button:
                                text: 'SpeedLane Turnstyle'
                                on_release: root.do_play_sound('data/audio/sad_trombone.wav')
                            Button:
                                text: 'TriLock Turnstyle'
                                on_release: root.do_play_sound('data/audio/sad_trombone.wav')
                            Button:
                                text: 'THG Turnstyle'
                                on_release: root.do_play_sound('data/audio/sad_trombone.wav')
                            Button:
                                text: 'Phone Ring'
                                on_release: root.do_play_sound('data/audio/sad_trombone.wav')
                            Button:
                                text: 'Diversion'
                                on_release: root.do_play_sound('data/audio/fart.wav')
                Screen:
                    name: 'Checklist'
                    ChecklistWidget:
                        id: checklist_menu
                Screen:
                    name: 'Campaigns'
                    BoxLayout:
                        id: default_layout
                        orientation: 'vertical'
                        spacing: 2
                        BoxLayout:
                            id: campaigns_panel_layout
                            orientation: 'horizontal'
                            size_hint: 1, .8
                            TextInput:
                                size_hint: 1, .85
                                multiline: True
                                background_color: [0,0,0,1]
                                foreground_color: [1,1,1,1]
                                focus: False
                                hint_text: 'Manage campaigns here'
        BoxLayout:
            size_hint: 1, .1
            id: tool_panel_layout
            orientation: 'horizontal'
            name: 'bar'
            Button:
                background_normal: 'data/images/nav/camera.png'
                background_down: 'data/images/nav/camera.png'
                on_release: root.do_take_picture()
            Button:
                background_normal: 'data/images/nav/map.png'
                background_down: 'data/images/nav/map.png'
                on_release: root.do_set_screen(self, "Home")
            Button:
                background_normal: 'data/images/nav/menu.png'
                background_down: 'data/images/nav/menu.png'
                on_release: root.do_set_screen(self, "Menu")
